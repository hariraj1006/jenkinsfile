pipeline
{
    agent any 
        stages
        {
            stage('download')
            {
                steps
                {
                    git 'https://github.com/IntelliqDevops/maven134.git'
                }
            }
            stage('build')
            {
                steps
                {
                sh 'mvn package'
                }
            }
            stage('deploy')
            {
                steps
                {
                    sh 'scp /var/lib/jenkins/workspace/D-pipeline1/webapp/target/webapp.war ubuntu@18.227.111.133:/var/lib/tomcat10/webapps/testapp.war'
                }
            }
            stage('testing')
            {
                steps
                {
                    git'https://github.com/IntelliqDevops/FunctionalTesting.git'
                    sh 'java -jar /var/lib/jenkins/workspace/D-pipeline1/testing.jar'
                }
            }
            stage('delivery')
            {
                steps
                {
                    sh 'scp /var/lib/jenkins/workspace/D-pipeline1/webapp/target/webapp.war ubuntu@3.21.44.159:/var/lib/tomcat10/webapps/prodapp.war'
                }
            }
        }
        post
        {
            success
            {
                echo 'success'
            }
            failure
            {
                echo 'ci as failed'
            }
        }
}
